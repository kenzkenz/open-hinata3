(function(){"use strict";var e={5153:function(e,t,a){var o=a(5130),i=a(6768),s=a(4232),r=a(6450),n=a(7810),l=a(1051);const p={id:"map00"},c=["id"],m={id:"left-top-div"},d={class:"terrain-btn-div"},u={class:"terrain-btn-container"},h=["onPointerdown"],g=["onPointerdown"],y=["onPointerdown"],f=["onPointerdown"],b={class:"terrain-reset"},k=["onPointerdown"],v={class:"zoom-div"};function x(e,t,a,x,w,z){const L=(0,i.g2)("DialogMenu"),S=(0,i.g2)("DialogLayer"),P=(0,i.gN)("drag");return(0,i.uX)(),(0,i.Wv)(r.E,null,{default:(0,i.k6)((()=>[(0,i.bF)(l.Y,null,{default:(0,i.k6)((()=>[(0,i.Lk)("div",p,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.mapNames,(a=>(0,i.bo)(((0,i.uX)(),(0,i.CE)("div",{key:a,id:a,style:(0,s.Tr)(e.mapSize[a]),onClick:t[4]||(t[4]=(...e)=>z.btnPosition&&z.btnPosition(...e))},[t[12]||(t[12]=(0,i.Lk)("div",{class:"center-target"},null,-1)),(0,i.Lk)("div",m,["map01"===a?((0,i.uX)(),(0,i.Wv)(n.D,{key:0,onClick:e=>z.btnClickMenu(a)},{default:(0,i.k6)((()=>t[5]||(t[5]=[(0,i.Lk)("i",{class:"fa-solid fa-bars"},null,-1)]))),_:2},1032,["onClick"])):(0,i.Q3)("",!0),"map01"===a?((0,i.uX)(),(0,i.Wv)(n.D,{key:1,style:{"margin-left":"10px"},onClick:z.btnClickSplit},{default:(0,i.k6)((()=>t[6]||(t[6]=[(0,i.Lk)("i",{class:"fa-solid fa-table-columns"},null,-1)]))),_:1},8,["onClick"])):(0,i.Q3)("",!0),(0,i.bF)(n.D,{style:{"margin-left":"10px"},onClick:e=>z.btnClickLayer(a)},{default:(0,i.k6)((()=>t[7]||(t[7]=[(0,i.Lk)("i",{class:"fa-solid fa-layer-group"},null,-1)]))),_:2},1032,["onClick"])]),(0,i.bF)(L,{mapName:a},null,8,["mapName"]),(0,i.bF)(S,{mapName:a},null,8,["mapName"]),(0,i.bo)(((0,i.uX)(),(0,i.CE)("div",d,[(0,i.Lk)("div",u,[(0,i.Lk)("button",{type:"button",class:"terrain-btn-up terrain-btn",onPointerdown:e=>z.upMousedown(a),onPointerup:t[0]||(t[0]=(...e)=>z.mouseup&&z.mouseup(...e))},t[8]||(t[8]=[(0,i.Lk)("i",{class:"fa fa-arrow-up fa-lg hover"},null,-1)]),40,h),(0,i.Lk)("button",{type:"button",class:"terrain-btn-down terrain-btn",onPointerdown:e=>z.downMousedown(a),onPointerup:t[1]||(t[1]=(...e)=>z.mouseup&&z.mouseup(...e))},t[9]||(t[9]=[(0,i.Lk)("i",{class:"fa fa-arrow-down fa-lg"},null,-1)]),40,g),(0,i.Lk)("button",{type:"button",class:"terrain-btn-left terrain-btn",onPointerdown:e=>z.leftMousedown(a),onPointerup:t[2]||(t[2]=(...e)=>z.mouseup&&z.mouseup(...e))},t[10]||(t[10]=[(0,i.Lk)("i",{class:"fa fa-arrow-left fa-lg"},null,-1)]),40,y),(0,i.Lk)("button",{type:"button",class:"terrain-btn-right terrain-btn",onPointerdown:e=>z.rightMousedown(a),onPointerup:t[3]||(t[3]=(...e)=>z.mouseup&&z.mouseup(...e))},t[11]||(t[11]=[(0,i.Lk)("i",{class:"fa fa-arrow-right fa-lg"},null,-1)]),40,f),(0,i.Lk)("div",b,[(0,i.Lk)("button",{type:"button",onPointerdown:e=>z.terrainReset(a)},"戻す",40,k)])])])),[[P]]),(0,i.Lk)("div",v,"zoom="+(0,s.v_)(e.zoom.toFixed(2)),1)],12,c)),[[o.aG,e.mapFlg[a]]]))),128))])])),_:1})])),_:1})}a(6984),a(7566),a(8721);var w=a(4373);function z(e,t,a,o,r,n){const l=(0,i.g2)("Dialog");return(0,i.uX)(),(0,i.Wv)(l,{dialog:n.s_dialogs[a.mapName],mapName:a.mapName},{default:(0,i.k6)((()=>[(0,i.Lk)("div",{style:(0,s.Tr)(e.menuContentSize)}," メニュー まだなにもない ",4)])),_:1},8,["dialog","mapName"])}var L={name:"Dialog-menu",props:["mapName"],data:()=>({menuContentSize:{height:"auto",margin:"10px",overflow:"auto","user-select":"text"}}),computed:{s_dialogs(){return this.$store.state.dialogs.menuDialog}},methods:{}},S=a(1241);const P=(0,S.A)(L,[["render",z]]);var $=P,N=a(5540);const _={class:"first-div"},j={class:"drag-item"},D={class:"label-div"},F={class:"range-div"},C=["onUpdate:modelValue","onInput"],M=["onClick"],O={class:"second-div"};function A(e,t,a,r,n,l){const p=(0,i.g2)("draggable"),c=(0,i.g2)("Tree"),m=(0,i.g2)("Dialog");return(0,i.uX)(),(0,i.Wv)(m,{dialog:l.s_dialogs[a.mapName],mapName:a.mapName},{default:(0,i.k6)((()=>[(0,i.Lk)("div",{style:(0,s.Tr)(e.menuContentSize)},[(0,i.Lk)("div",_,[(0,i.bF)(p,{modelValue:l.s_selectedLayers[a.mapName],"onUpdate:modelValue":t[2]||(t[2]=e=>l.s_selectedLayers[a.mapName]=e),"item-key":"id",handle:".handle-div"},{item:(0,i.k6)((({element:e})=>[(0,i.Lk)("div",j,[t[5]||(t[5]=(0,i.Lk)("div",{class:"handle-div"},[(0,i.Lk)("i",{class:"fa-solid fa-up-down fa-lg handle-icon hover"})],-1)),(0,i.Lk)("div",D,(0,s.v_)(e.label),1),(0,i.Lk)("div",F,[(0,i.bo)((0,i.Lk)("input",{type:"range",min:"0",max:"1",step:"0.01",class:"range","onUpdate:modelValue":t=>e.opacity=t,onInput:t=>l.changeSlider(e),onMouseover:t[0]||(t[0]=e=>l.changeWatchFlg(!1)),onMouseleave:t[1]||(t[1]=e=>l.changeWatchFlg(!0))},null,40,C),[[o.Jo,e.opacity,void 0,{number:!0}]])]),(0,i.Lk)("div",{class:"trash-div",onClick:t=>l.removeLayer(e.id)},t[4]||(t[4]=[(0,i.Lk)("i",{class:"fa-sharp fa-solid fa-trash-arrow-up hover"},null,-1)]),8,M)])])),_:1},8,["modelValue"]),t[6]||(t[6]=(0,i.Lk)("div",{style:{color:"white","font-size":"larger","text-align":"center"}}," 下のリストから選んでください。 ",-1))]),(0,i.Lk)("div",O,[(0,i.bF)(N.W,{label:"地図抽出",modelValue:e.searchText,"onUpdate:modelValue":t[3]||(t[3]=t=>e.searchText=t),style:{"margin-top":"10px"}},null,8,["modelValue"]),(0,i.bF)(c,{nodes:e.layers,"search-text":e.searchText,"use-checkbox":!1,"use-icon":!0,onNodeClick:l.onNodeClick},null,8,["nodes","search-text","onNodeClick"])])],4)])),_:1},8,["dialog","mapName"])}const T={id:"stdSource",obj:{type:"raster",tiles:["https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png"],tileSize:256}},E={id:"oh-stdLayer",type:"raster",source:"stdSource",minzoom:0,maxzoom:18},B={id:"seamlessphoto",obj:{type:"raster",tiles:["https://cyberjapandata.gsi.go.jp/xyz/seamlessphoto/{z}/{x}/{y}.jpg"],tileSize:256}},U={id:"oh-seamlessphoto",source:B.id,type:"raster",minzoom:2,maxzoom:23},Z={id:"plateauPmtiles",obj:{type:"vector",url:"pmtiles://https://shiworks.xsrv.jp/pmtiles-data/plateau/PLATEAU_2023_LOD0.pmtiles",minzoom:16,maxzoom:16,attribution:'<a href=""></a>'}},W={id:"oh-plateauPmtiles",source:"plateauPmtiles","source-layer":"PLATEAU_2023_LOD0",minzoom:14,maxzoom:23,type:"fill-extrusion",paint:{"fill-extrusion-color":"#797979","fill-extrusion-opacity":1,"fill-extrusion-height":["get","measured_height"]}},q={id:"csGifu",obj:{type:"raster",tiles:["https://kenzkenz2.xsrv.jp/gihucs/{z}/{x}/{y}.png"],tileSize:256,scheme:"tms"}},V={id:"oh-csGifuLayer",type:"raster",source:"csGifu",minzoom:0,maxzoom:23},I={id:"csNotoSource",obj:{type:"raster",tiles:["https://www2.ffpri.go.jp/soilmap/tile/cs_noto/{z}/{x}/{y}.png"],tileSize:256,maxzoom:17}},R={id:"oh-csNotoLayer",type:"raster",source:"csNotoSource"},X={id:"csShizuokaSource",obj:{type:"raster",tiles:["https://kenzkenz3.xsrv.jp/cs/shizuoka/{z}/{x}/{y}.png"],tileSize:256}},J={id:"oh-csShizuokaLayer",type:"raster",source:"csShizuokaSource",minzoom:0,maxzoom:23},G={id:"tamaSekisyokuSource",obj:{type:"raster",tiles:["https://kenzkenz2.xsrv.jp/tokyo/tamasekisyoku/{z}/{x}/{y}.png"],tileSize:256,scheme:"tms",crossOrigin:"anonymous",paint:{"raster-resampling":"nearest"}}},K={id:"oh-tamaSekisyokuLayer",type:"raster",source:"tamaSekisyokuSource",minzoom:1,maxzoom:23},Q={id:"csOsakaSource",obj:{type:"raster",tiles:["https://xs489works.xsrv.jp/raster-tiles/pref-osaka/osaka-cs-tiles/{z}/{x}/{y}.png"],tileSize:256,crossOrigin:"anonymous",paint:{"raster-resampling":"nearest"}}},H={id:"oh-csOsakaLayer",type:"raster",source:"csOsakaSource",minzoom:1,maxzoom:23},Y={id:"amx-a-pmtiles",obj:{type:"vector",minzoom:2,maxzoom:16,url:"pmtiles://https://habs.rad.naro.go.jp/spatial_data/amx/a.pmtiles",attribution:"<a href='https://www.moj.go.jp/MINJI/minji05_00494.html' target='_blank'>登記所備付地図データ（法務省）</a>"}},ee={id:"oh-amx-a-fude",type:"fill",source:"amx-a-pmtiles","source-layer":"fude",paint:{"fill-color":"rgba(254, 217, 192, 1)","fill-outline-color":"rgba(255, 0, 0, 1)","fill-opacity":.4}},te={id:"oh-amx-a-daihyo",type:"heatmap",source:"amx-a-pmtiles","source-layer":"daihyo",paint:{"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(255, 255, 255, 0)",.5,"rgba(255, 255, 0, 0.5)",1,"rgba(255, 0, 0, 0.5)"],"heatmap-radius":["interpolate",["exponential",10],["zoom"],2,5,14,50]}},ae={id:"bakumatsu",obj:{type:"vector",url:"pmtiles://https://kenzkenz3.xsrv.jp/pmtiles/bakumatsu/b3.pmtiles",attribution:"<a href='' target='_blank'></a>"}},oe={id:"oh-bakumatsu",type:"fill",source:"bakumatsu","source-layer":"b3",paint:{"fill-color":["interpolate",["linear"],["get","石高計"],0,"white",3e3,"red"]}},ie={id:"oh-bakumatsuLine",type:"line",source:"bakumatsu","source-layer":"b3",paint:{"line-color":"#000","line-width":["interpolate",["linear"],["zoom"],7,0,11,.5]}},se={id:"oh-bakumatsuLabel",type:"symbol",source:"bakumatsu","source-layer":"b3",layout:{"text-field":["get","村名0"],"text-font":["Noto Sans CJK JP Bold"],"text-offset":[.5,0],visibility:"visible"},paint:{"text-color":"rgba(255, 255, 255, 0.7)","text-halo-color":"rgba(0,0,0,0.7)","text-halo-width":1},maxzoom:24,minzoom:10},re=[{id:1,label:"基本地図テスト",nodes:[{id:"oh-stdLayer",label:"標準地図",source:T,layers:[E]},{id:"oh-seamlessphoto",label:"最新写真",source:B,layers:[U]},{id:"oh-plateauPmtiles",label:"PLATEAU建物",source:Z,layers:[W]},{id:"oh-amx-a-fude",label:"登記所備付地図データ",source:Y,layers:[ee,te]},{id:"oh-bakumatsu",label:"幕末近世の村",source:ae,layers:[oe,ie,se]}]},{id:2,label:"立体図等",nodes:[{id:"oh-csNotoLayer",label:"能登CS立体図",source:I,layers:[R]},{id:"oh-csGifuLayer",label:"岐阜県CS立体図",source:q,layers:[V]},{id:"oh-csOsakaLayer",label:"大阪府CS立体図",source:Q,layers:[H]},{id:"oh-csShizuokaLayer",label:"静岡県CS立体図",source:X,layers:[J]},{id:"oh-tamaSekisyokuLayer",label:"東京都多摩地域赤色立体地図",source:G,layers:[K]}]}],ne=JSON.parse(JSON.stringify(re)),le={map01:re,map02:ne};var pe=a(9579),ce=a(1527),me=a.n(ce),de={name:"Dialog-layer",props:["mapName"],components:{Tree:pe.Ay,draggable:me()},data:()=>({searchText:"",watchFlg:!0,selectedLayers:{map01:[],map02:[]},layers:[],menuContentSize:{height:"auto",margin:"10px",overflow:"auto","user-select":"text"}}),computed:{s_dialogs(){return this.$store.state.dialogs.layerDialog},s_selectedLayers:{get(){return this.$store.state.selectedLayers},set(e){this.$store.state.selectedLayers=e}}},methods:{changeWatchFlg(e){this.watchFlg=e},changeSlider(e){const t=this.$store.state[this.mapName];e.layers&&e.layers.forEach((a=>{"raster"===e.source.obj.type?t.setPaintProperty(a.id,"raster-opacity",e.opacity):"fill"===a.type?t.setPaintProperty(a.id,"fill-opacity",e.opacity):"line"===a.type?t.setPaintProperty(a.id,"line-opacity",e.opacity):"fill-extrusion"===a.type?t.setPaintProperty(a.id,"fill-extrusion-opacity",e.opacity):"heatmap"===a.type&&t.setPaintProperty(a.id,"heatmap-opacity",e.opacity)}))},removeLayer(e){const t=this.$store.state[this.mapName];this.s_selectedLayers[this.mapName]=this.s_selectedLayers[this.mapName].filter((t=>t.id!==e)),t.removeLayer(e)},onNodeClick(e){if(e.source)if(this.s_selectedLayers[this.mapName].find((t=>t.id===e.id))){const t=this.$store.state[this.mapName];this.s_selectedLayers[this.mapName]=this.s_selectedLayers[this.mapName].filter((t=>t.id!==e.id)),t.removeLayer(e.id)}else this.s_selectedLayers[this.mapName].unshift({id:e.id,label:e.label,source:e.source,layer:e.layer,layers:e.layers,opacity:1})}},mounted(){this.layers=le[this.mapName]},watch:{s_selectedLayers:{handler:function(){if(console.log("変更を検出しました"),!this.watchFlg)return;const e=this.$store.state[this.mapName],t=e.getStyle().layers;if(t)for(let a=t.length-1;a>=0;a--){const o=t[a].id;"oh"===o.slice(0,2)&&e.removeLayer(o)}for(let a=this.s_selectedLayers[this.mapName].length-1;a>=0;a--){const t=this.s_selectedLayers[this.mapName][a];t.layers&&t.layers.forEach((a=>{e.getSource(t.source.id)||e.addSource(t.source.id,t.source.obj),e.addLayer(a),console.log(a.type),"raster"===t.source.obj.type?e.setPaintProperty(a.id,"raster-opacity",t.opacity):"fill"===a.type?e.setPaintProperty(a.id,"fill-opacity",t.opacity):"line"===a.type?e.setPaintProperty(a.id,"line-opacity",t.opacity):"fill-extrusion"===a.type?e.setPaintProperty(a.id,"fill-extrusion-opacity",t.opacity):"heatmap"===a.type&&e.setPaintProperty(a.id,"heatmap-opacity",t.opacity)}))}},deep:!0}}};const ue=(0,S.A)(de,[["render",A],["__scopeId","data-v-11867c44"]]);var he=ue,ge=a(7326),ye=a.n(ge),fe=a(4800),be={name:"App",components:{DialogLayer:he,DialogMenu:$},data:()=>({mapNames:["map01","map02"],mapFlg:{map01:!0,map02:!1},mapSize:{map01:{top:0,left:0,width:"100%",height:"100%"},map02:{top:0,right:0,width:"50%",height:"100%"}},permalink:"",param:"",dbparams:"",mapName:"",pitch:0,bearing:0,zoom:0}),computed:{s_selectedLayers:{get(){return this.$store.state.selectedLayers},set(e){this.$store.state.selectedLayers=e}}},methods:{btnPosition(){document.querySelector("#map01").clientWidth<Number(document.querySelector(".terrain-btn-div").style.left.replace("px",""))&&(document.querySelector(".terrain-btn-div").style.left="",document.querySelector(".terrain-btn-div").style.right="10px")},terrainReset(e){const t=this,a=this.$store.state[e];function o(){t.pitch=a.getPitch(),0!==t.pitch?(a.setPitch(a.getPitch()-5),requestAnimationFrame(o)):(a.setPitch(0),t.pitch=a.getPitch(),console.log(t.pitch),t.updatePermalink(),cancelAnimationFrame(o))}function i(){t.bearing=a.getBearing();let e=-5;t.bearing<0&&(e=5),0!==t.bearing?(t.$store.state.map01.setBearing(a.getBearing()+e),t.$store.state.map02.setBearing(a.getBearing()+e),requestAnimationFrame(i)):(t.bearing=a.getBearing(),t.updatePermalink(),cancelAnimationFrame(i))}window.innerWidth<1e3?(a.setPitch(0),this.$store.state.map01.setBearing(0),this.$store.state.map02.setBearing(0)):(o(),i())},mouseup(){this.mouseDown=!1},leftMousedown(e){const t=this,a=this.$store.state[e];function o(){t.bearing=a.getBearing(),t.mouseDown?(t.$store.state.map01.setBearing(a.getBearing()+5),t.$store.state.map02.setBearing(a.getBearing()+5),requestAnimationFrame(o)):(t.bearing=a.getBearing(),cancelAnimationFrame(o))}t.mouseDown=!0,o()},rightMousedown(e){const t=this,a=this.$store.state[e];function o(){t.bearing=a.getBearing(),t.mouseDown?(t.$store.state.map01.setBearing(a.getBearing()-5),t.$store.state.map02.setBearing(a.getBearing()-5),requestAnimationFrame(o)):(t.bearing=a.getBearing(),cancelAnimationFrame(o))}t.mouseDown=!0,o()},upMousedown(e){const t=this,a=this.$store.state[e];function o(){t.pitch=a.getPitch(),t.mouseDown?(a.setPitch(a.getPitch()+5),requestAnimationFrame(o)):(t.pitch=a.getPitch(),cancelAnimationFrame(o))}t.mouseDown=!0,o()},downMousedown(e){const t=this,a=this.$store.state[e];function o(){t.pitch=a.getPitch(),t.mouseDown?(a.setPitch(a.getPitch()-5),requestAnimationFrame(o)):(t.pitch=a.getPitch(),cancelAnimationFrame(o))}t.mouseDown=!0,o()},btnClickMenu(e){"none"===this.$store.state.dialogs.menuDialog[e].style.display?(this.$store.commit("incrDialogMaxZindex"),this.$store.state.dialogs.menuDialog[e].style["z-index"]=this.$store.state.dialogMaxZindex,this.$store.state.dialogs.menuDialog[e].style.display="block"):this.$store.state.dialogs.menuDialog[e].style.display="none"},btnClickLayer(e){"none"===this.$store.state.dialogs.layerDialog[e].style.display?(this.$store.commit("incrDialogMaxZindex"),this.$store.state.dialogs.layerDialog[e].style["z-index"]=this.$store.state.dialogMaxZindex,this.$store.state.dialogs.layerDialog[e].style.display="block"):this.$store.state.dialogs.layerDialog[e].style.display="none"},btnClickSplit(){this.mapFlg.map02?(this.mapSize.map01.width="100%",this.mapSize.map01.height="100%",this.mapFlg.map02=!1):(window.innerWidth>1e3?(document.querySelector(".terrain-btn-div").style.left="",document.querySelector(".terrain-btn-div").style.right="10px",this.mapSize.map01.width="50%",this.mapSize.map01.height="100%"):(this.mapSize.map01.width="100%",this.mapSize.map01.height="50%",this.mapSize.map02.width="100%",this.mapSize.map02.height="50%",this.mapSize.map02.top="50%"),this.mapFlg.map02=!0)},updatePermalink(){const e=this.$store.state.map01,t=e.getCenter(),a=e.getZoom(),{lng:o,lat:i}=t,s=this.mapFlg.map02,r=isNaN(this.pitch)?0:this.pitch,n=isNaN(this.bearing)?0:this.bearing,l=JSON.stringify(this.$store.state.selectedLayers);this.param=`?lng=${o}&lat=${i}&zoom=${a}&split=${s}&pitch=${r}&bearing=${n}&slj=${l}`,this.createShortUrl(),this.zoom=a},createShortUrl(){let e=new URLSearchParams;e.append("parameters",this.param),w.A.post("https://kenzkenz.xsrv.jp/open-hinata3/php/shortUrl.php",e).then((e=>{window.history.pushState(null,"map","?s="+e.data.urlid),console.log("保存成功")})).catch((e=>{console.log(e)}))},parseUrlParams(){let e;e=this.dbparams?new URLSearchParams(this.dbparams):new URLSearchParams(window.location.search);const t=parseFloat(e.get("lng")),a=parseFloat(e.get("lat")),o=parseFloat(e.get("zoom")),i=e.get("split"),s=parseFloat(e.get("pitch")),r=parseFloat(e.get("bearing")),n=JSON.parse(e.get("slj"));return this.pitch=s,this.bearing=r,{lng:t,lat:a,zoom:o,split:i,pitch:s,bearing:r,slj:n}},init(){let e=new fe.Zs;ye().addProtocol("pmtiles",e.tile);const t=this.parseUrlParams();this.mapNames.forEach((e=>{let a=[139.7024,35.6598],o=16,i=0,s=0;t.lng&&(a=[t.lng,t.lat],o=t.zoom,i=t.pitch,s=t.bearing);const r=new(ye().Map)({container:e,localIdeographFontFamily:["sans-serif"],center:a,zoom:o,pitch:i,bearing:s,maxPitch:85,style:{version:8,glyphs:"https://glyphs.geolonia.com/{fontstack}/{range}.pbf",sources:{"background-osm-raster":{type:"raster",tiles:["https://tile.openstreetmap.jp/styles/osm-bright-ja/{z}/{x}/{y}.png"],tileSize:256,attribution:"<a href='https://www.openstreetmap.org/copyright' target='_blank'>© OpenStreetMap contributors</a>"}},layers:[{id:"background-osm-raster",type:"raster",source:"background-osm-raster"}]}});this.$store.state[e]=r}));let a=!1;function o(e,t){let o="move";window.innerWidth<1e3&&(o="moveend"),e.on(o,(()=>{a||(a=!0,t.setCenter(e.getCenter()),t.setZoom(e.getZoom()),a=!1)})),t.on(o,(()=>{a||(a=!0,e.setCenter(t.getCenter()),e.setZoom(t.getZoom()),a=!1)}))}o(this.$store.state.map01,this.$store.state.map02),this.mapNames.forEach((e=>{const a=this.$store.state[e];a.on("load",(()=>{"map02"===e&&"true"===t.split&&(this.mapFlg.map02=!0,window.innerWidth>1e3?(this.mapSize.map01.width="50%",this.mapSize.map01.height="100%"):(this.mapSize.map01.width="100%",this.mapSize.map01.height="50%",this.mapSize.map02.width="100%",this.mapSize.map02.height="50%",this.mapSize.map02.top="50%")),this.mapNames.forEach((()=>{const e=this.parseUrlParams();e.slj&&(this.s_selectedLayers=e.slj)})),a.addSource("gsidem-terrain-rgb",{type:"raster-dem",tiles:["https://xs489works.xsrv.jp/raster-tiles/gsi/gsi-dem-terrain-rgb/{z}/{x}/{y}.png"],attribution:'<a href="https://maps.gsi.go.jp/development/ichiran.html#dem" target="_blank">地理院タイル(標高タイル)</a>',tileSize:256}),"map01"===e?a.setSky({"sky-color":"#199EF3","sky-horizon-blend":.7,"horizon-color":"#f0f8ff","horizon-fog-blend":.8,"fog-color":"#2c7fb8","fog-ground-blend":.9,"atmosphere-blend":["interpolate",["linear"],["zoom"],0,1,12,0]}):a.setSky({"sky-color":"#199EF3","sky-horizon-blend":.71,"horizon-color":"#f0f8ff","horizon-fog-blend":.8,"fog-color":"#2c7fb8","fog-ground-blend":.9,"atmosphere-blend":["interpolate",["linear"],["zoom"],0,1,12,0]}),a.on("click",this.updatePermalink),a.on("dragend",this.updatePermalink),a.on("idle",this.updatePermalink),0!==this.pitch&&(this.$store.state.map01.setTerrain({source:"gsidem-terrain-rgb",exaggeration:1}),this.$store.state.map02.setTerrain({source:"gsidem-terrain-rgb",exaggeration:1})),this.$watch((function(){return[this.pitch]}),(function(){0!==this.pitch?(this.$store.state.map01.setTerrain({source:"gsidem-terrain-rgb",exaggeration:1}),this.$store.state.map02.setTerrain({source:"gsidem-terrain-rgb",exaggeration:1})):(this.$store.state.map01.setTerrain(null),this.$store.state.map02.setTerrain(null))})),a.on("click","oh-bakumatsu",(e=>{const t=e.lngLat,o=e.features[0].properties.村名,i=Math.floor(Number(e.features[0].properties.石高計));new(ye().Popup)({offset:10,closeButton:!0}).setLngLat(t).setHTML(`\n                  <div style="font-size: 20px; font-weight: normal; color: #333;line-height: 25px;">\n                   村名=${o}<br>石高=${i}\n                  </div>\n                `).addTo(a)}))}))}))}},mounted(){const e=this;document.addEventListener("touchmove",(function(e){1!==e.scale&&e.preventDefault()}),{passive:!1});const t=new URLSearchParams(window.location.search),a=t.get("s");w.A.get("https://kenzkenz.xsrv.jp/open-hinata3/php/shortUrlSelect.php",{params:{urlid:a}}).then((function(t){e.dbparams=t.data,e.init();const a=new URL(window.location.href);window.history.replaceState(null,"",a.pathname+window.location.hash)}))},watch:{s_selectedLayers:{handler:function(){console.log("変更を検出しました"),this.updatePermalink()},deep:!0}}};const ke=(0,S.A)(be,[["render",x],["__scopeId","data-v-ad337bb0"]]);var ve=ke,xe=a(782),we=(0,xe.y$)({state:{map01:null,map02:null,storeTest:"storeTest",dialogs:{menuDialog:{map01:{name:"menuDialog",style:{top:"56px",left:"10px","z-index":1,height:"auto","min-width":"150px",display:"none"}},map02:{name:"menuDialog",style:{top:"56px",left:"10px","z-index":1,height:"auto","min-width":"150px",display:"none"}}},layerDialog:{map01:{name:"layerDialog",style:{top:"56px",left:"10px","z-index":1,height:"auto","min-width":"150px",display:"none"}},map02:{name:"layerDialog",style:{top:"56px",left:"10px","z-index":1,height:"auto","min-width":"150px",display:"none"}}}},selectedLayers:{map01:[],map02:[]},dialogMaxZindex:0},getters:{},mutations:{incrDialogMaxZindex(e){e.dialogMaxZindex++}},actions:{},modules:{}}),ze=(a(5524),a(1480)),Le=(0,ze.$N)({defaults:{VBtn:{color:"primary"}}});async function Se(){const e=await a.e(53).then(a.t.bind(a,8874,23));e.load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}const Pe=["id"];function $e(e,t,a,o,r,n){const l=(0,i.gN)("drag");return(0,i.bo)(((0,i.uX)(),(0,i.CE)("div",{onVDragEnd:t[1]||(t[1]=(...e)=>n.dragEnd&&n.dragEnd(...e)),class:"dialog-div",ref:"dragDiv",onMousedown:t[2]||(t[2]=(...e)=>n.dialogMouseDown&&n.dialogMouseDown(...e)),style:(0,s.Tr)(this.dialog.style)},[(0,i.Lk)("div",{class:"drag-handle",id:n.id},null,8,Pe),(0,i.Lk)("div",null,[(0,i.Lk)("div",{class:"close-btn-div",onClick:t[0]||(t[0]=(...e)=>n.closeBtn&&n.closeBtn(...e))},t[3]||(t[3]=[(0,i.Lk)("i",{class:"fa-solid fa-xmark hover close-btn"},null,-1)])),(0,i.RG)(e.$slots,"default",{},void 0,!0)])],36)),[[l,{handle:"#"+n.id}]])}var Ne={name:"dialog-0",props:["dialog","mapName"],components:{},data(){return{}},methods:{dragEnd(){this.$store.state.dialogs[this.dialog.name][this.mapName].style.top=this.$refs.dragDiv.style.top,this.$store.state.dialogs[this.dialog.name][this.mapName].style.left=this.$refs.dragDiv.style.left},closeBtn(){this.$store.state.dialogs[this.dialog.name][this.mapName].style.display="none"},dialogMouseDown(){this.$store.commit("incrDialogMaxZindex"),this.$store.state.dialogs[this.dialog.name][this.mapName].style.top=this.$refs.dragDiv.style.top,this.$store.state.dialogs[this.dialog.name][this.mapName].style.left=this.$refs.dragDiv.style.left,this.$store.state.dialogs[this.dialog.name][this.mapName].style["z-index"]=this.$store.state.dialogMaxZindex}},computed:{id(){return"drag-handle-"+this.dialog.name+"-"+this.mapName}},mounted(){}};const _e=(0,S.A)(Ne,[["render",$e],["__scopeId","data-v-5576a000"]]);var je=_e,De=a(344);Se(),(0,o.Ef)(ve).use(we).use(Le).use(De.A).component("Dialog",je).mount("#app")}},t={};function a(o){var i=t[o];if(void 0!==i)return i.exports;var s=t[o]={exports:{}};return e[o].call(s.exports,s,s.exports,a),s.exports}a.m=e,function(){var e=[];a.O=function(t,o,i,s){if(!o){var r=1/0;for(c=0;c<e.length;c++){o=e[c][0],i=e[c][1],s=e[c][2];for(var n=!0,l=0;l<o.length;l++)(!1&s||r>=s)&&Object.keys(a.O).every((function(e){return a.O[e](o[l])}))?o.splice(l--,1):(n=!1,s<r&&(r=s));if(n){e.splice(c--,1);var p=i();void 0!==p&&(t=p)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[o,i,s]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};a.t=function(o,i){if(1&i&&(o=this(o)),8&i)return o;if("object"===typeof o&&o){if(4&i&&o.__esModule)return o;if(16&i&&"function"===typeof o.then)return o}var s=Object.create(null);a.r(s);var r={};e=e||[null,t({}),t([]),t(t)];for(var n=2&i&&o;"object"==typeof n&&!~e.indexOf(n);n=t(n))Object.getOwnPropertyNames(n).forEach((function(e){r[e]=function(){return o[e]}}));return r["default"]=function(){return o},a.d(s,r),s}}(),function(){a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,o){return a.f[o](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/webfontloader.81ef3343.js"}}(),function(){a.miniCssF=function(e){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="open-hinata3:";a.l=function(o,i,s,r){if(e[o])e[o].push(i);else{var n,l;if(void 0!==s)for(var p=document.getElementsByTagName("script"),c=0;c<p.length;c++){var m=p[c];if(m.getAttribute("src")==o||m.getAttribute("data-webpack")==t+s){n=m;break}}n||(l=!0,n=document.createElement("script"),n.charset="utf-8",n.timeout=120,a.nc&&n.setAttribute("nonce",a.nc),n.setAttribute("data-webpack",t+s),n.src=o),e[o]=[i];var d=function(t,a){n.onerror=n.onload=null,clearTimeout(u);var i=e[o];if(delete e[o],n.parentNode&&n.parentNode.removeChild(n),i&&i.forEach((function(e){return e(a)})),t)return t(a)},u=setTimeout(d.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=d.bind(null,n.onerror),n.onload=d.bind(null,n.onload),l&&document.head.appendChild(n)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p=""}(),function(){var e={524:0};a.f.j=function(t,o){var i=a.o(e,t)?e[t]:void 0;if(0!==i)if(i)o.push(i[2]);else{var s=new Promise((function(a,o){i=e[t]=[a,o]}));o.push(i[2]=s);var r=a.p+a.u(t),n=new Error,l=function(o){if(a.o(e,t)&&(i=e[t],0!==i&&(e[t]=void 0),i)){var s=o&&("load"===o.type?"missing":o.type),r=o&&o.target&&o.target.src;n.message="Loading chunk "+t+" failed.\n("+s+": "+r+")",n.name="ChunkLoadError",n.type=s,n.request=r,i[1](n)}};a.l(r,l,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,o){var i,s,r=o[0],n=o[1],l=o[2],p=0;if(r.some((function(t){return 0!==e[t]}))){for(i in n)a.o(n,i)&&(a.m[i]=n[i]);if(l)var c=l(a)}for(t&&t(o);p<r.length;p++)s=r[p],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(c)},o=self["webpackChunkopen_hinata3"]=self["webpackChunkopen_hinata3"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=a.O(void 0,[504],(function(){return a(5153)}));o=a.O(o)})();
//# sourceMappingURL=app.96b12e10.js.map